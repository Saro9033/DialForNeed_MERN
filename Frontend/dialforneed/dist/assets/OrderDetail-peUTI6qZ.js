import{l as z,v as R,k as q,n as c,au as W,as as G,am as L,aY as Y,bn as $,a6 as B,bo as H,r as o,av as J,aR as K,bp as D,an as M,a9 as Q,bq as U,j as s,D as C,E as O,bg as V,bj as X,br as Z}from"./index-B9-9R2Yl.js";const es=()=>{var y,E,v;const{id:h}=z(),r=R(),{enqueueSnackbar:l}=q(),e=c(W),j=c(G),x=c(L),w=c(Y),p=c($),u=c(B),d=c(H),[F,b]=o.useState(null),[g,f]=o.useState("");o.useEffect(()=>{r(J(h)),r(K()),r(D())},[r,h]),o.useEffect(()=>{x&&l(x,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{r(M())}}),u&&l(u,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{r(Q())}}),p&&(l("Task Assigned Successfully!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{r(U())}}),r(D()))},[p,x,u,l,r]);const _=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),A=a=>{b(a)},P=a=>{r(Z({id:h,taskData:{orderItemId:a,employeeId:g}})),b(null),f("")},T=()=>{var m;const a={columns:[{label:"Product",field:"product",sort:"asc"},{label:"Price",field:"price",sort:"asc"},{label:"Type",field:"type",sort:"asc"},{label:"Employee",field:"employee",sort:"asc"},{label:"Status",field:"status",sort:"asc"},{label:"Actions",field:"actions",sort:"asc"}],rows:[]};return(m=e==null?void 0:e.orderItems)==null||m.forEach(t=>{var I,k,S;const N=F===t._id,i=d==null?void 0:d.find(n=>n.orderItem===t._id);console.log(d),console.log(i),a.rows.push({product:s.jsxs(s.Fragment,{children:[s.jsx("img",{width:"50",src:(k=(I=t.productId)==null?void 0:I.images[0])==null?void 0:k.image,alt:""}),s.jsx("br",{}),s.jsxs("span",{className:"text-secondary",style:{fontSize:"14px"},children:[t.productId.name,"Â (",t.quantity,"x)"]})]}),price:_(t.productId.price),type:(S=t.productId)==null?void 0:S.type,employee:s.jsx(s.Fragment,{children:N?s.jsxs("select",{value:g,onChange:n=>f(n.target.value),children:[s.jsx("option",{disabled:!0,value:"",children:"Select"}),w.map(n=>s.jsx("option",{value:n._id,children:n.name},n._id))]}):s.jsx("span",{children:i?i==null?void 0:i.employee.name:"Select"})}),status:s.jsx(s.Fragment,{children:t.status.includes("pending")||t.status.includes("Pending")?s.jsx("span",{className:"text-danger",style:{fontSize:"14px",fontWeight:"600"},children:t.status}):s.jsx("span",{className:"text-success",style:{fontSize:"14px",fontWeight:"600"},children:t.status})}),actions:s.jsx(s.Fragment,{children:N?s.jsx("button",{className:"btn btn-primary",onClick:()=>P(t._id),children:"Assign"}):s.jsx("button",{className:"btn btn-primary",onClick:()=>A(t._id),children:s.jsx(X,{})})})})}),a};return s.jsx("div",{className:"container",children:s.jsxs("div",{className:"row mt-5 d-flex justify-content-between mb-5",children:[s.jsx("div",{className:"col-12 col-lg-12 mb-4 order-confirm",children:j==="loading"?s.jsx("div",{className:"d-flex align-items-start justify-content-center",children:s.jsx("div",{className:"loader"})}):j==="succeeded"&&((y=e==null?void 0:e.orderItems)==null?void 0:y.length)===0?s.jsx("h1",{children:"No Orders Placed"}):s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"mt-4",children:s.jsx(O,{children:s.jsx("h2",{children:"Orders"})})}),s.jsx(C,{children:s.jsx(O,{children:s.jsx("div",{className:"table-responsive",children:s.jsx(V,{className:"px-3",bordered:!0,striped:!0,hover:!0,style:{justifyContent:"center"},searching:!1,responsive:!0,data:T()})})})})]})}),s.jsx("div",{className:"col-12 col-lg-6",children:e&&e.user&&s.jsxs("div",{id:"order_summary",children:[s.jsx("h4",{children:`${(E=e.user)==null?void 0:E.name}'s Details`}),s.jsx("hr",{}),s.jsx("table",{className:"table",children:s.jsxs("tbody",{children:[((v=e.user)==null?void 0:v.avatar)&&s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"text-center",children:s.jsx("img",{src:e.user.avatar,style:{borderRadius:"50%"},className:"border",alt:e.user.name,width:"100",height:"100"})})}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Order ID"})}),s.jsxs("td",{children:[": ",e._id]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Order Date"})}),s.jsxs("td",{children:[": ",new Date(e.createdAt).toLocaleDateString()]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Total Amount"})}),s.jsxs("td",{children:[": ",e.totalPrice]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Name"})}),s.jsxs("td",{children:[": ",e.user.name]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Email"})}),s.jsxs("td",{children:[": ",e.user.email]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Phone Number"})}),s.jsxs("td",{children:[": ",e.user.phoneNumber]})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("b",{children:"Address"})}),s.jsxs("td",{children:[": ",e.user.address,", ",e.user.city,", ",e.user.country,", ",e.user.postalCode]})]})]})}),s.jsx("hr",{})]})})]})})};export{es as default};
