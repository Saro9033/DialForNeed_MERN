import{R as Q,n as t,aw as V,aB as Y,r as b,aY as J,a7 as K,a6 as W,cc as X,v as Z,k,bn as ee,a9 as se,cd as re,aS as p,bq as de,j as e,D as h,E as x,bg as le,G as a,F as ne,a3 as te,bm as ce,bj as ie,bk as ae,ce as oe,br as he,aR as xe,aC as je}from"./index-CP13wdj2.js";const ue=()=>{var v,T;const[B,j]=Q.useState(!1),c=t(V),r=t(Y),[O,m]=b.useState(null),[y,g]=b.useState(""),q=t(J),I=t(K),u=t(W),N=t(X),d=Z(),{enqueueSnackbar:o}=k(),f=t(ee);b.useEffect(()=>{if(u&&(o(u,{variant:"error"}),d(se())),N){o("Task Deleted",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),d(re()),d(p());return}if(f){o("Task Updated Successfully!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"},onExited:()=>{d(de())}}),d(p());return}d(p())},[d,u,f,o,N]);const L=l=>{window.confirm("Are you sure you want to delete this Task?")&&d(oe(l))},$=(l,s)=>{const i={id:l,taskData:{orderItemId:s,employeeId:y}};d(he(i)),console.log(i),m(null),g("")},G=l=>{d(xe()),m(l)},H=l=>{j(!0),d(je(l))},M=()=>{const l={columns:[{label:"User",field:"user",sort:"asc"},{label:"Product",field:"product",sort:"asc"},{label:"Employee",field:"employee",sort:"asc"},{label:"Status",field:"status",sort:"asc"},{label:"Actions",field:"actions",sort:"asc"}],rows:[]};return c==null||c.forEach(s=>{var C,D,E,S,w,_,F,P,A,R,z;const i=O===s._id;l.rows.push({user:e.jsxs(e.Fragment,{children:[(D=(C=s==null?void 0:s.order)==null?void 0:C.user)==null?void 0:D.name,e.jsx("br",{}),e.jsxs("span",{className:"text-secondary",style:{fontSize:"14px"},children:["(",(S=(E=s==null?void 0:s.order)==null?void 0:E.user)==null?void 0:S.phoneNumber,")"]})]}),product:e.jsxs(te,{to:`/product/${(_=(w=s==null?void 0:s.orderItem)==null?void 0:w.productId)==null?void 0:_._id}`,style:{color:"unset",textDecoration:"underline"},children:[" ",(P=(F=s==null?void 0:s.orderItem)==null?void 0:F.productId)==null?void 0:P.name,"  "]}),status:(A=s==null?void 0:s.orderItem)==null?void 0:A.status,employee:e.jsx(e.Fragment,{children:i?e.jsxs("select",{value:y,onChange:n=>g(n.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Select"}),q.map(n=>e.jsx("option",{value:n._id,children:n.name},n._id))]}):e.jsxs(e.Fragment,{children:[(R=s==null?void 0:s.employee)==null?void 0:R.name,e.jsx("br",{}),e.jsxs("span",{className:"text-secondary",style:{fontSize:"14px"},children:["(",(z=s==null?void 0:s.employee)==null?void 0:z.phoneNumber,")"]})]})}),actions:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{onClick:n=>H(s._id),className:"btn btn-primary",children:e.jsx(ce,{})}),"    ",i?e.jsxs(e.Fragment,{children:["  ",e.jsx("button",{className:"btn btn-primary",onClick:()=>$(s==null?void 0:s.order._id,s==null?void 0:s.orderItem._id),children:"Assign"}),"     ",e.jsx("button",{className:"btn btn-danger",onClick:()=>m(null),children:"Cancel"})," "]}):e.jsx("button",{className:"btn btn-primary",onClick:()=>G(s._id),children:e.jsx(ie,{})}),"    ",e.jsx("button",{onClick:n=>L(s._id),className:"btn btn-danger",children:e.jsx(ae,{})})]})})}),l},U=()=>{j(!1)};return console.log(r),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("h2",{children:"Tasks"})}),I==="loading"?e.jsx("div",{className:"d-flex align-items-start justify-content-center",children:e.jsx("div",{className:"loader"})}):I==="succeeded"&&c&&c.length===0?e.jsx("h6",{className:"mt-3",children:"No Tasks Placed"}):e.jsx(e.Fragment,{children:e.jsx(h,{children:e.jsx(x,{children:e.jsx("div",{className:"table-responsive",children:e.jsx(le,{className:"px-3",bordered:!0,striped:!0,hover:!0,searching:!1,responsive:!0,data:M()})})})})}),e.jsx(a,{show:B,onHide:U,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:r&&e.jsxs(e.Fragment,{children:["  ",e.jsx(a.Header,{closeButton:!0,children:e.jsxs(a.Title,{id:"contained-modal-title-vcenter",children:[r.order.user.name,"'s Order"]})}),e.jsxs(a.Body,{children:[e.jsx(h,{children:e.jsx(x,{className:"col-12 mt-3 col-lg-12",children:e.jsxs("div",{id:"order_summary",children:[e.jsx("h4",{children:"Product Details"}),e.jsx("hr",{}),e.jsx("table",{className:"table",children:e.jsxs("tbody",{children:[r.orderItem.productId.images&&e.jsx("tr",{children:e.jsxs("td",{children:[e.jsx("img",{width:"100",src:(T=(v=r.orderItem.productId)==null?void 0:v.images[0])==null?void 0:T.image,alt:""})," "]})}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Product Name"})}),e.jsx("td",{children:r.orderItem.productId.name})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Product Price"})}),e.jsxs("td",{children:[": ",r.orderItem.productId.price]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Quantity"})}),e.jsxs("td",{children:[": ",r.orderItem.quantity]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Product Status"})}),e.jsxs("td",{children:[": ",r.orderItem.status.includes("pending")||r.orderItem.status.includes("Pending")?e.jsx("span",{style:{color:"red"},children:r.orderItem.status}):e.jsx("span",{style:{color:"green"},children:r.orderItem.status})]})]})]})}),e.jsx("hr",{})]})})}),e.jsx(h,{children:e.jsx(x,{className:"col-12 col-lg-12 mt-3",children:e.jsxs("div",{id:"order_summary",children:[e.jsx("h4",{children:`${r.order.user.name}'s Details`}),e.jsx("hr",{}),e.jsx("table",{className:"table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Order ID"})}),e.jsxs("td",{children:[": ",r.order._id]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Name"})}),e.jsxs("td",{children:[": ",r.order.user.name]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Email"})}),e.jsxs("td",{children:[": ",r.order.user.email]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Phone Number"})}),e.jsxs("td",{children:[": ",r.order.user.phoneNumber]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Order Date"})}),e.jsxs("td",{children:[": ",new Date(r.order.paidAt).toLocaleDateString()]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Total Amount"})}),e.jsxs("td",{children:[": ",r.orderItem.productId.price*r.orderItem.quantity]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Address"})}),e.jsxs("td",{children:[": ",r.order.user.address,", ",r.order.user.city,", ",r.order.user.postalCode]})]})]})}),e.jsx("hr",{})]})})}),e.jsx(h,{children:e.jsx(x,{className:"col-12 mt-3 col-lg-12",children:e.jsxs("div",{id:"order_summary",children:[e.jsx("h4",{children:`${r.employee.name}'s Details`}),e.jsx("hr",{}),e.jsx("table",{className:"table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Name"})}),e.jsxs("td",{children:[": ",r.employee.name]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Employee Type"})}),e.jsxs("td",{children:[": ",r.employee.employeeType]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Email"})}),e.jsxs("td",{children:[": ",r.employee.email]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("b",{children:"Phone Number"})}),e.jsxs("td",{children:[": ",r.employee.phoneNumber]})]})]})}),e.jsx("hr",{})]})})})]}),e.jsx(a.Footer,{children:e.jsx(ne,{type:"button",className:"btn btn-danger",onClick:()=>j(!1),children:"Close"})})]})})]})};export{ue as default};
