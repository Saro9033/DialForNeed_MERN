import{r,n as o,aY as H,b_ as M,b$ as R,c0 as Y,c1 as $,c2 as J,c3 as K,v as Q,k as V,c4 as W,c5 as X,aR as b,c6 as Z,c7 as ee,j as e,bf as se,D as te,E as ae,bg as re,G as u,H as t,F as g,bj as le,bk as ne,c8 as oe,c9 as ce,ca as ie,cb as de}from"./index-_oCaa9Py.js";const pe=()=>{const[z,h]=r.useState(!1),[x,j]=r.useState(!1),[q,S]=r.useState(""),[f,c]=r.useState(""),[v,i]=r.useState(""),[I,w]=r.useState(""),[E,d]=r.useState(""),[C,m]=r.useState(""),y=o(H),l=o(M),F=o(R),N=o(Y),D=o($),U=o(J),k=o(K),a=Q(),{enqueueSnackbar:p}=V();r.useEffect(()=>{if(N){p(N,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),a(W());return}if(D){p("New Employee Created!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),a(X()),a(b());return}if(k){p("Employee Updated",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),a(Z()),a(b());return}if(U){p("Employee Deleted",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),a(ee()),a(b());return}a(b())},[a,N,p,k,D,U]),r.useEffect(()=>{l&&(S(l._id??""),c(l.name??""),i(l.email??""),d(l.phoneNumber??""),m(l.employeeType??""))},[l]);const A=s=>{j(!0),h(!0),a(ie(s))},B=s=>{window.confirm("Are you sure you want to delete this Employee?")&&a(de(s))},G=()=>{const s={columns:[{label:"Name",field:"name",sort:"asc"},{label:"Number",field:"number",sort:"asc"},{label:"Type",field:"type",sort:"asc"},{label:"Actions",field:"actions",sort:"asc"}],rows:[]};return y&&y.length>0?y.forEach(n=>{s.rows.push({name:e.jsxs(e.Fragment,{children:[n.name,e.jsx("br",{}),e.jsxs("span",{className:"text-secondary",style:{fontSize:"14px"},children:["(",n.email,")"]})]}),number:n.phoneNumber,type:n.employeeType,actions:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>A(n._id),className:"btn btn-primary",children:e.jsx(le,{})}),"    ",e.jsx("button",{onClick:()=>B(n._id),className:"btn btn-danger",children:e.jsx(ne,{})})]})})}):console.log("No employees found."),s},P=s=>{s.preventDefault(),a(oe({name:f,email:v,password:I,phoneNumber:E,employeeType:C})),c(""),i(""),w(""),d(""),m("")},L=s=>{s.preventDefault(),a(ce({id:q,obj:{name:f,email:v,phoneNumber:E,employeeType:C}})).then(()=>{S(""),c(""),i(""),d(""),m(""),j(!1),h(!1)}).catch(_=>{console.error("Failed to update employee:",_)})},T=()=>{h(!1),j(!1)},O=()=>{c(""),i(""),d(""),m(""),h(!0)};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Employees"}),e.jsx("div",{className:"mt-4 mx-2 d-flex justify-content-between",children:e.jsx("div",{children:e.jsxs("button",{variant:"primary",onClick:O,className:"btn btn-primary",children:["Add ",e.jsx(se,{fontSize:"1.5rem"})]})})})]}),F==="loading"?e.jsx("div",{className:"d-flex align-items-start justify-content-center",children:e.jsx("div",{className:"loader"})}):F==="succeeded"&&y.length===0?e.jsx("h6",{className:"mt-3",children:"No Employees Placed"}):e.jsx(e.Fragment,{children:e.jsx(te,{children:e.jsx(ae,{children:e.jsx("div",{className:"table-responsive",children:e.jsx(re,{className:"px-3",bordered:!0,striped:!0,hover:!0,searching:!1,responsive:!0,data:G()})})})})}),e.jsxs(u,{show:z,onHide:T,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(u.Header,{closeButton:!0,children:e.jsx(u.Title,{id:"contained-modal-title-vcenter",children:x?e.jsx("p",{children:"Update Employee "}):e.jsx("p",{children:"Create New Employee "})})}),e.jsxs(t,{onSubmit:x?L:P,children:[e.jsxs(u.Body,{children:[e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(t.Label,{children:"Name"}),e.jsx(t.Control,{required:!0,onChange:s=>c(s.target.value),value:f,type:"text",placeholder:"Enter employee name"})]}),e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput2",children:[e.jsx(t.Label,{children:"Email Id"}),e.jsx(t.Control,{required:!0,onChange:s=>i(s.target.value),value:v,type:"email",placeholder:"Enter employee Email Id"})]}),!x&&e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput4",children:[e.jsx(t.Label,{children:"Password"}),e.jsx(t.Control,{required:!0,onChange:s=>w(s.target.value),value:I,type:"password",placeholder:"Enter employee password"})]}),e.jsxs(t.Group,{className:"mb-3",controlId:"exampleForm.ControlInput3",children:[e.jsx(t.Label,{children:"Phone Number"}),e.jsx(t.Control,{required:!0,onChange:s=>d(s.target.value),value:E,type:"text",placeholder:"Enter employee Phone number"})]}),e.jsx(t.Label,{children:"Select Employee Type"}),e.jsxs(t.Select,{required:!0,onChange:s=>m(s.target.value),value:C,"aria-label":"Default select example",children:[e.jsx("option",{children:"Select"}),e.jsx("option",{value:"sales",children:"Sales"}),e.jsx("option",{value:"service",children:"Service"})]})]}),e.jsxs(u.Footer,{children:[x?e.jsx(g,{type:"submit",className:"btn btn-primary",children:"Update"}):e.jsx(g,{type:"submit",className:"btn btn-primary",children:"Submit"}),e.jsx(g,{type:"button",className:"btn btn-danger",onClick:T,children:"Close"})]})]})]})]})};export{pe as Employees,pe as default};
