import{n as r,aW as P,ba as B,bD as G,bE as H,bF as T,bG as L,R as q,v as J,k as K,r as n,bH as c,bI as W,bJ as Q,aP as h,bK as X,bL as Y,j as e,F as v,D as y,E as C,bg as Z,G as m,bf as $,bM as V,bj as ee,bk as ae,bN as te,bO as se}from"./index-CP13wdj2.js";const ne=()=>{const u=r(P),g=r(B),x=r(G),N=r(H),w=r(T),I=r(L),[k,p]=q.useState(!1),s=J(),{enqueueSnackbar:i}=K(),[d,l]=n.useState(""),[j,D]=n.useState(null);n.useState("");const[f,b]=n.useState(""),[S,o]=n.useState(c);n.useEffect(()=>{if(x){i(x,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),s(W());return}if(N){i("Category Added",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),s(Q()),s(h());return}if(w){i("Category Updated",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),s(X()),s(h());return}if(I){i("Category Deleted",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),s(Y()),s(h());return}s(h())},[s,x,i,N,w,I]);const R=async t=>{t.preventDefault();let a=new FormData;a.append("title",d),a.append("image",f),await s(V(a)),l(""),b(""),o(c),p(!1)},U=t=>{D(t);const a=u.find(E=>E._id===t);l(a==null?void 0:a.title),o(a==null?void 0:a.image)},_=async t=>{let a=new FormData;a.append("title",d),f&&a.append("image",f),await s(te({id:t,formData:a})),D(null)},A=t=>{if(t.target.name==="avatar"){const a=new FileReader;a.onload=()=>{a.readyState===2&&(o(a.result),b(t.target.files[0]))},a.readAsDataURL(t.target.files[0])}},z=t=>{window.confirm("Are you sure you want to delete this category?")&&s(se(t))},O=()=>{const t={columns:[{label:"Image",field:"image",sort:"asc"},{label:"Categories",field:"name",sort:"asc"},{label:"Actions",field:"actions",sort:"asc"}],rows:[]};return u.forEach((a,E)=>{t.rows.push({image:j===a._id?e.jsxs("div",{className:"file-upload-container d-flex align-items-center justify-content-center",children:[e.jsx("input",{type:"file",name:"avatar",id:"avatarInput",onChange:A,style:{display:"none"}}),e.jsx("label",{htmlFor:"avatarInput",className:"label",children:e.jsx("figure",{className:"personal-figure",children:e.jsx("img",{src:S,width:"80%",className:"personal-avatar",alt:"avatar"})})})]}):e.jsx("img",{src:a==null?void 0:a.image,width:"50"}),name:j===a._id?e.jsx("input",{type:"text",value:d,onChange:M=>l(M.target.value),className:"form-control"}):a.title,actions:j===a._id?e.jsx("button",{onClick:()=>_(a._id),className:"btn btn-primary",children:"Update"}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>U(a._id),className:"btn btn-primary",children:[" ",e.jsx(ee,{}),"  "]}),e.jsx("button",{onClick:()=>z(a._id),className:"btn btn-danger py-1 px-2 ml-2",children:e.jsx(ae,{})})]})})}),t},F=()=>{l(""),b(null),o(c),p(!0)};return e.jsxs("div",{children:[g==="loading"?e.jsx("div",{className:"d-flex align-items-start justify-content-center",children:e.jsx("div",{className:"loader"})}):g==="succeeded"&&u.length===0?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"No Categories Placed"}),e.jsx(v,{onClick:F,children:"Add"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(y,{className:"mt-4",children:[e.jsx(C,{xs:6,children:e.jsx("h2",{children:"All Categories"})}),e.jsxs(C,{xs:6,children:["   ",e.jsx(v,{onClick:F,children:"Add"})]})]}),e.jsx(y,{children:e.jsx(C,{children:e.jsx("div",{className:"table-responsive",children:e.jsx(Z,{className:"px-3",bordered:!0,striped:!0,hover:!0,searching:!1,responsive:!0,data:O()})})})})]}),e.jsxs(m,{show:k,onHide:()=>p(!1),size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{id:"contained-modal-title-vcenter",children:"Carousel"})}),e.jsx(m.Body,{children:e.jsx(y,{className:"w-100 mb-3",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"file-upload-container d-flex align-items-center justify-content-center",children:[e.jsx("input",{type:"file",name:"avatar",id:"avatarInput",onChange:A,style:{display:"none"}}),e.jsxs("label",{htmlFor:"avatarInput",className:"label",children:[e.jsx("figure",{className:"personal-figure",children:e.jsx("img",{src:S,width:"100%",height:"200px",className:"personal-avatar",alt:"avatar"})}),e.jsx("div",{className:"d-flex align-items-center justify-content-center",children:e.jsx("button",{onClick:()=>o(c),className:"mt-2 btn btn-outline-danger d-flex",type:"button",children:"Remove"})})]})]}),e.jsx("label",{children:"Category Name"}),e.jsx("input",{className:"form-control",type:"text",placeholder:"Type category name",value:d,onChange:t=>l(t.target.value)}),e.jsxs(v,{disabled:g==="loading",type:"submit",variant:"primary",className:"w-100 mt-5",children:["Add Category",e.jsx($,{fontSize:"1.5rem"})]})]})})})]})]})};export{ne as default};
